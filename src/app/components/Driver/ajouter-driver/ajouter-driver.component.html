<form [formGroup]="save" novalidate (ngSubmit)="saveData()">
  <div class="mb-4">
    <ion-input
      label="Noms & Prénoms"
      type="text"
      label-placement="floating"
      fill="outline"
      placeholder="Entrez le nom complet...."
      [clearInput]="true"
      autocomplete="off"
      autocorrect="on"
      formControlName="fullname"
    ></ion-input>

    <span
      *ngIf="
        this.save.controls?.fullname.touched &&
        this.save.controls?.fullname.invalid
      "
    >
      <div
        class="ion-padding"
        *ngIf="this.save.controls?.fullname.errors?.required"
      >
        <ion-text color="danger"
          >Désolé mais ce champs est obligatoire.</ion-text
        >
      </div>
      <div
        class="ion-padding"
        color="danger"
        *ngIf="this.save.controls?.fullname.errors?.minlength"
      >
        <ion-text color="danger">Renseignez au moins 06 caractères.</ion-text>
      </div>
    </span>
  </div>

  <div class="mb-4">
    <ion-input
      label="Surnom"
      type="text"
      label-placement="floating"
      fill="outline"
      placeholder="Entrez le surnom...."
      [clearInput]="true"
      autocomplete="off"
      autocorrect="on"
      formControlName="subname"
    ></ion-input>
    <span
      *ngIf="
        this.save.controls?.subname.touched &&
        this.save.controls?.subname.invalid
      "
    >
      <div
        class="ion-padding"
        *ngIf="this.save.controls?.subname.errors?.required"
      >
        <ion-text color="danger"
          >Désolé mais ce champs est obligatoire.</ion-text
        >
      </div>
      <div
        class="ion-padding"
        color="danger"
        *ngIf="this.save.controls?.subname.errors?.minlength"
      >
        <ion-text color="danger">Renseignez au moins 06 caractères.</ion-text>
      </div>
    </span>
  </div>

  <div class="mb-4">
    <ion-input
      label="Téléphone"
      type="text"
      label-placement="floating"
      fill="outline"
      placeholder="Entrez le numéro de téléphone...."
      [clearInput]="true"
      autocomplete="off"
      autocorrect="on"
      formControlName="phone"
    ></ion-input>
    <span
      *ngIf="
        this.save.controls?.phone.touched && this.save.controls?.phone.invalid
      "
    >
      <div
        class="ion-padding"
        *ngIf="this.save.controls?.phone.errors?.required"
      >
        <ion-text color="danger"
          >Désolé mais ce champs est obligatoire.</ion-text
        >
      </div>
      <div
        class="ion-padding"
        color="danger"
        *ngIf="this.save.controls?.phone.errors?.minlength"
      >
        <ion-text color="danger">Renseignez exactement 09 caractères.</ion-text>
      </div>
      <div
        class="ion-padding"
        color="danger"
        *ngIf="this.save.controls?.matricule.errors?.pattern"
      >
        <ion-text color="danger"
          >Le numéro doit commencer par << 6 >>.</ion-text
        >
      </div>
    </span>
  </div>

  <div class="mb-4">
    <ion-input
      label="Adresse"
      type="text"
      label-placement="floating"
      fill="outline"
      placeholder="Entrez l'adresse...."
      [clearInput]="true"
      autocomplete="off"
      autocorrect="on"
      formControlName="adresse"
    ></ion-input>
    <span
      *ngIf="
        this.save.controls?.adresse.touched &&
        this.save.controls?.adresse.invalid
      "
    >
      <div
        class="ion-padding"
        *ngIf="this.save.controls?.adresse.errors?.required"
      >
        <ion-text color="danger"
          >Désolé mais ce champs est obligatoire.</ion-text
        >
      </div>
      <div
        class="ion-padding"
        color="danger"
        *ngIf="this.save.controls?.adresse.errors?.minlength"
      >
        <ion-text color="danger">Renseignez au moins 03 caractères.</ion-text>
      </div>
    </span>
  </div>

  <div class="mb-4">
    <ion-input
      label="CNI"
      type="text"
      label-placement="floating"
      fill="outline"
      placeholder="Entrez le numéro de CNI...."
      [clearInput]="true"
      autocomplete="off"
      autocorrect="on"
      formControlName="cni"
    ></ion-input>
    <span
      *ngIf="
        this.save.controls?.adresse.touched && this.save.controls?.cni.invalid
      "
    >
      <div class="ion-padding" *ngIf="this.save.controls?.cni.errors?.required">
        <ion-text color="danger"
          >Désolé mais ce champs est obligatoire.</ion-text
        >
      </div>
      <div
        class="ion-padding"
        color="danger"
        *ngIf="this.save.controls?.cni.errors?.minlength"
      >
        <ion-text color="danger">Renseignez au moins 10 caractères.</ion-text>
      </div>
    </span>
  </div>

  <div class="grid grid-cols-2 gap-6 mb-4">
    <div>
      <ion-button expand="block" color="danger" (click)="takePicture()">
        Annuler
      </ion-button>
    </div>
    <div>
      <ion-button
        expand="block"
        type="submit"
        [disabled]="!save.valid || !isReady"
      >
        Enregistrer
      </ion-button>
    </div>
  </div>

  <img *ngIf="image" [src]="image" width="100%" height="40%" />

  <ion-fab slot="fixed" vertical="bottom" horizontal="end">
    <ion-fab-button size="small" color="dark" (click)="takePicture()">
      <ion-icon name="camera-reverse-outline"></ion-icon>
    </ion-fab-button>
  </ion-fab>
</form>
